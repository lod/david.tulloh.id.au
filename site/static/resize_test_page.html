<html>
	<head>
		<title>Test image sizing</title>
		<script type="text/javascript" src="/js/get_random_image_from_flickr.js"></script>

	</head>
	<body>
		<h2>Four images to test resizing and orientation, should be undistorted</h2>
		<table>
			<tr>
				<td><img id="TL" height="200px" width="150px"/></td>
				<td><img id="TR" height="200px" width="150px"/></td>
			</tr>
			<tr>
				<td><img id="LL" height="150px" width="200px"/></td>
				<td><img id="LR" height="150px" width="200px"/></td>
			</tr>
		</table>

		<pre>
		* Image sizing: https://www.flickr.com/services/api/misc.urls.html
		* size is set via the longest edge
		*  s    thumbnail    75    cropped square - unsupported
		*  q    thumbnail    150    cropped square - unsupported
		*  t    thumbnail    100
		*  m    small    240
		*  n    small    320
		*  w    small    400
		*  (none)    medium    500 - unsupported
		*  z    medium    640
		*  c    medium    800
		*  b    large    1024
		*  ... bigger options trimmed
		*  o    original    arbitrary - unsupported
		</pre>
		<table style="display:block; overflow-x:scroll;">
			<tr>
				<td>2000x50 = t</td><td>2000x100 = t</td><td>2000x150 = t</td><td>2000x200 = t</td>
				<td>2000x250 = m</td><td>2000x300 = n</td><td>2000x350 = n</td><td>2000x400 = w</td>
				<td>2000x500 = w</td><td>2000x600 = w</td><td>2000x700 = z</td><td>2000x800 = c</td>
				<td>2000x900 = c</td><td>2000x1000 = c</td><td>2000x1100 = b</td>
			</tr>
			<tr id="heightrow"></tr>
			<tr></tr>
			<tr>
				<td>50x2000 = t</td><td>100x2000 = t</td><td>150x2000 = t</td><td>200x2000 = t</td>
				<td>250x2000 = m</td><td>300x2000 = n</td><td>350x2000 = n</td><td>400x2000 = w</td>
				<td>500x2000 = w</td><td>600x2000 = w</td><td>700x2000 = z</td><td>800x2000 = c</td>
				<td>900x2000 = c</td><td>1000x2000 = c</td><td>1100x2000 = b</td>
			</tr>
			<tr id="widthrow"></tr>
		</table>
	</body>
	<script>
		function update_image(imgid, img_type) {
			img = document.getElementById(imgid);
			
			img.src = `grid_test_${img_type}.png`;

			if (img_type == "tall") {
				width = 100;
				height = 150;
			} else {
				width = 150;
				height = 100;
			}

			const sizing = get_closest_size(img.width, img.height, width, height);
			img.style.height = sizing.height;
			img.style.width = sizing.width;
			img.alt = sizing.key;

		}
        update_image("TL", "wide");
        update_image("TR", "tall");
        update_image("LL", "wide");
        update_image("LR", "tall");

		hrow = [];
		wrow = [];
		for (let dim = 50; dim < 400; dim += 50) {
			hrow.push([2000, dim, get_closest_size(2000, dim, 2000, 2000).key]);
			wrow.push([dim, 2000, get_closest_size(dim, 2000, 2000, 2000).key]);
		}
		for (let dim = 400; dim <= 1100; dim += 100) {
			hrow.push([2000, dim, get_closest_size(2000, dim, 2000, 2000).key]);
			wrow.push([dim, 2000, get_closest_size(dim, 2000, 2000, 2000).key]);
		}

		target_hrow = document.getElementById("heightrow");
		for (const el of hrow) {
			let td = document.createElement("td");
			td.appendChild(document.createTextNode(el.join()))
			target_hrow.appendChild(td);
		}

		target_wrow = document.getElementById("widthrow");
		for (const el of wrow) {
			let td = document.createElement("td");
			td.appendChild(document.createTextNode(el.join()))
			target_wrow.appendChild(td);
		}


	</script>
</html>
